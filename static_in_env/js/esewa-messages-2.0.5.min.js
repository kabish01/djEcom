/*! 
 * esewa-components v2.0.5
 * https://dev.esewa.com.np
 * Copyright (c) 2018 eSewa Developers <developers@esewa.com.np>
 * License: eSewa
 */
!function(){"use strict";function a(a,b,c,d,e,f,g){function h(){return u.length}function i(a){if(1!==arguments.length||a)if(a)n(a.ecmsgId);else for(var b=0;b<u.length;b++)n(u[b].ecmsgId)}function j(a,b,c){var d=p().iconClasses.error;return b="Error!",o(d,a,b,c)}function k(a,b,c){var d=p().iconClasses.info;return b="Info",o(d,a,b,c)}function l(a,b,c){var d=p().iconClasses.success;return b="Success",o(d,a,b,c)}function m(a,b,c){var d=p().iconClasses.warning;return b="Warning",o(d,a,b,c)}function n(b,c){function d(a){for(var b=0;b<u.length;b++)if(u[b].ecmsgId===a)return u[b]}function e(){return!u.length}var h=d(b);h&&!h.deleting&&(h.deleting=!0,h.isOpened=!1,a.leave(h.el).then(function(){h.scope.options.onHidden&&h.scope.options.onHidden(!!c,h),h.scope.$destroy();var a=u.indexOf(h);delete w[h.scope.message],u.splice(a,1);var b=f.maxOpened;b&&u.length>=b&&u[b-1].open.resolve(),e()&&(s.remove(),s=null,x=g.defer())}))}function o(a,b,c,d){return angular.isObject(c)&&(d=c,c=null),r({iconClass:a,message:b,optionsOverride:d,title:c})}function p(){return angular.extend({},f)}function q(b){if(s)return x.promise;s=angular.element("<div></div>"),s.attr("id",b.containerId),s.addClass(b.positionClass),s.css({"pointer-events":"auto"});var c=angular.element(document.querySelector(b.target));if(!c||!c.length)throw"Target for ecmsgs doesn't exist";return a.enter(s,c).then(function(){x.resolve()}),x.promise}function r(c){function f(){return m.autoDismiss&&m.maxOpened&&u.length>m.maxOpened}function h(a,b,c){function d(b){if(c[b])return function(){c[b](a)}}c.allowHtml?(a.scope.allowHtml=!0,a.scope.title=e.trustAsHtml(b.title),a.scope.message=e.trustAsHtml(b.message)):(a.scope.title=b.title,a.scope.message=b.message),a.scope.ecmsgType=a.iconClass,a.scope.ecmsgId=a.ecmsgId,a.scope.extraData=c.extraData,a.scope.options={extendedTimeOut:c.extendedTimeOut,messageClass:c.messageClass,onHidden:c.onHidden,onShown:d("onShown"),onTap:d("onTap"),progressBar:c.progressBar,tapToDismiss:c.tapToDismiss,timeOut:c.timeOut,titleClass:c.titleClass,ecmsgClass:c.ecmsgClass},c.closeButton&&(a.scope.options.closeHtml=c.closeHtml)}function i(){function a(a){for(var b=["containerId","iconClasses","maxOpened","newestOnTop","positionClass","preventDuplicates","preventOpenDuplicates","templates"],c=0,d=b.length;c<d;c++)delete a[b[c]];return a}var b={ecmsgId:t++,isOpened:!1,scope:d.$new(),open:g.defer()};return b.iconClass=c.iconClass,c.optionsOverride&&(angular.extend(m,a(c.optionsOverride)),b.iconClass=c.optionsOverride.iconClass||b.iconClass),h(b,c,m),b.el=j(b.scope),b}function j(a){var c=angular.element("<div ecmsg></div>");return b.get("$compile")(c)(a)}function k(){return m.maxOpened&&u.length<=m.maxOpened||!m.maxOpened}function l(){var a=m.preventDuplicates&&c.message===v,b=m.preventOpenDuplicates&&w[c.message];return!(!a&&!b)||(v=c.message,w[c.message]=!0,!1)}var m=p();if(!l()){var o=i();if(u.push(o),f())for(var r=u.slice(0,u.length-m.maxOpened),x=0,y=r.length;x<y;x++)n(r[x].ecmsgId);return k()&&o.open.resolve(),o.open.promise.then(function(){q(m).then(function(){if(o.isOpened=!0,m.newestOnTop)a.enter(o.el,s).then(function(){o.scope.init()});else{var b=s[0].lastChild?angular.element(s[0].lastChild):null;a.enter(o.el,s,b).then(function(){o.scope.init()})}})}),o}}var s,t=0,u=[],v="",w={},x=g.defer();return{active:h,clear:i,error:j,info:k,remove:n,success:l,warning:m}}angular.module("esewaMessages",[]).factory("ecmsg",a),a.$inject=["$animate","$injector","$document","$rootScope","$sce","ecmsgConfig","$q"]}(),function(){"use strict";angular.module("esewaMessages").constant("ecmsgConfig",{allowHtml:!1,autoDismiss:!0,closeButton:!0,closeHtml:"<button>&times; Close</button>",containerId:"ecmsg-container",extendedTimeOut:1e3,iconClasses:{error:"ecmsg-error",info:"ecmsg-info",success:"ecmsg-success",warning:"ecmsg-warning"},maxOpened:1,messageClass:"ecmsg-message",newestOnTop:!0,onHidden:null,onShown:null,onTap:null,positionClass:"ecmsg-top-right",preventDuplicates:!1,preventOpenDuplicates:!1,progressBar:!1,tapToDismiss:!0,target:"body",templates:{ecmsg:"directives/ecmsg/ecmsg.html",progressbar:"directives/ecprogressbar/progressbar.html"},titleClass:"ecmsg-title",ecmsgClass:"ecmsg"})}(),function(){"use strict";function a(a){function b(a,b,c,d){function e(){var a=(h-(new Date).getTime())/g*100;b.css("width",a+"%")}var f,g,h;d.progressBar=a,a.start=function(a){f&&clearInterval(f),g=parseFloat(a),h=(new Date).getTime()+g,f=setInterval(e,10)},a.stop=function(){f&&clearInterval(f)},a.$on("$destroy",function(){clearInterval(f)})}return{replace:!0,require:"^ecmsg",templateUrl:function(){return a.templates.progressbar},link:b}}angular.module("esewaMessages").directive("ecProgressBar",a),a.$inject=["ecmsgConfig"]}(),function(){"use strict";function a(){this.progressBar=null,this.startProgressBar=function(a){this.progressBar&&this.progressBar.start(a)},this.stopProgressBar=function(){this.progressBar&&this.progressBar.stop()}}angular.module("esewaMessages").controller("ToastController",a)}(),function(){"use strict";function a(a,b,c,d){function e(c,e,f,g){function h(a){return g.startProgressBar(a),b(function(){g.stopProgressBar(),d.remove(c.ecmsgId)},a,1)}function i(){return c.options.closeHtml}var j;if(c.ecmsgClass=c.options.ecmsgClass,c.titleClass=c.options.titleClass,c.messageClass=c.options.messageClass,c.progressBar=c.options.progressBar,i()){var k=angular.element(c.options.closeHtml),l=a.get("$compile");k.addClass("ecmsg-close-button"),k.attr("ng-click","close(true, $event)"),l(k)(c),e.append(k)}c.init=function(){c.options.timeOut&&(j=h(c.options.timeOut)),c.options.onShown&&c.options.onShown()},c.close=function(a,b){b&&angular.isFunction(b.stopPropagation)&&(b.stopPropagation(),$("button").prop("disabled",!1)),d.remove(c.ecmsgId,a)}}return{replace:!0,templateUrl:function(){return c.templates.ecmsg},controller:"ToastController",link:e}}angular.module("esewaMessages").directive("ecmsg",a),a.$inject=["$injector","$interval","ecmsgConfig","ecmsg"]}(),angular.module("esewaMessages").run(["$templateCache",function(a){a.put("directives/ecprogressbar/progressbar.html",'<div class="ecmsg-progress"></div>\n'),a.put("directives/ecmsg/ecmsg.html",'<div class="{{ecmsgClass}} {{ecmsgType}}" ng-click="tapToast()">\n  <div ng-switch on="allowHtml">\x3c!--\n    <div ng-switch-default ng-if="title" class="{{titleClass}}" aria-label="{{title}}">{{title}}</div>--\x3e\n    <div ng-switch-default class="{{messageClass}}" aria-label="{{message}}">{{message}}</div>\n    <div ng-switch-when="true" ng-if="title" class="{{titleClass}}" ng-bind-html="title"></div>\n    <div ng-switch-when="true" class="{{messageClass}}" ng-bind-html="message"></div>\n  </div>\n  <ec-progress-bar ng-if="progressBar"></ec-progress-bar>\n</div>\n')}]);